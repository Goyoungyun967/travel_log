<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.iei.booking.model.dao.BookingDao">
	<insert id="insertBooking">
		insert into booking values(booking_seq.nextval, #{memberId}, #{sellerNo}, #{roomNo}, #{startDate}, #{endDate},
		sysdate, #{gusetCount}, #{guestName}, #{guestPhone}, 
		<choose>
			<when test="!guestRequest.equals('')">
				#{guestRequest},
			</when>
			<when test="guestRequest.equals('')">
				null,
			</when>
		</choose>
		1, #{portoneimpuid})
		<selectKey resultType="int" keyProperty="bookNo"
			order="AFTER">
			select max(book_no) from booking
		</selectKey>
	</insert>

</mapper>
